Отключить IPv6 в APT

 

Иногда вам нужно отключить IPv6 только в APT-пакете, и другая программа может продолжать использовать IPv6, если это необходимо. Чтобы отключить IPv6 в APT, выполните следующую команду, чтобы создать файл конфигурации для APT.

    sudo nano /etc/apt/apt.conf.d/99force-ipv4

Скопируйте и вставьте в файл следующую строку.

    Acquire::ForceIPv4 «true»;

Сохраните и закройте файл. С этого момента APT будет использовать только IPv4.






Отключить IPv6 на Ubuntu в целом

Если вы хотите полностью отключить IPv6 в своей системе Ubuntu Linux, вам необходимо внести некоторые изменения в параметр ядра Linux.

Измените файл 99-sysctl.conf file.

    sudo nano /etc/sysctl.d/99-sysctl.conf

Скопируйте и вставьте следующие 3 строки в нижней части файла.

    net.ipv6.conf.all.disable_ipv6 = 1

    net.ipv6.conf.default.disable_ipv6 = 1

    net.ipv6.conf.lo.disable_ipv6 = 1

Сохраните и закройте файл. Затем выполните следующую команду, чтобы загрузить указанные выше изменения.

    sudo sysctl -p

Теперь запустите следующую команду. Вы должны увидеть 1, что означает, что IPv6 был успешно отключен.

    cat /proc/sys/net/ipv6/conf/all/disable_ipv6

Параметры, определенные в файле 99-sysctl.conf, сохраняются при перезагрузке, поэтому IPv6 не будет включен в следующий раз при загрузке Ubuntu, если вы вручную не включите его повторно.